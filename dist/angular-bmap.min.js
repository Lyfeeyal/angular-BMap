/*! angular-BMap - v0.0.1 - 2015-06-13 */
!function(a,b){"use strict";function c(){function a(a,b){function c(){return g||(g=new BMap.Map("bMap")),g}function d(){var d=a.defer();return b(function(){c().centerAndZoom(new BMap.Point(118.789572,32.048667),14),d.resolve()}),d.promise}function e(){var b=a.defer(),c=new BMap.Geolocation;return c.getCurrentPosition(function(a){this.getStatus()===BMAP_STATUS_SUCCESS?b.resolve(a):b.reject("不能获取位置")},function(a){b.reject(a)}),b.promise}function f(){var b=a.defer();return e().then(function(a){c().panTo(a.point);var d=new BMap.Marker(new BMap.Point(116.404,39.915));c().addOverlay(d),b.resolve()},function(a){var b=new BMap.Point(116.404,39.915);c().panTo(b);var d=new BMap.Marker(b);c().addOverlay(d)}),b.promise}var g;return{initMap:d,geoLocation:e,geoLocationAndCenter:f}}this.$get=a,a.$inject=["$q","$timeout"]}function d(a){function b(a,b,c,d){d.initMap(),d.geoLocationAndCenter().then(function(a){console.log(a)},function(a){console.info(a)})}function c(){this.geoLocation=a.geoLocation,this.initMap=a.initMap,this.geoLocationAndCenter=a.geoLocationAndCenter}return{restrict:"EAC",replace:!0,scope:!0,template:'<div id="bMap" style="height: 100%;"></div>',link:b,controller:c}}var e=b.module("angularMap",[]);e.provider("angularBMap",c),e.directive("angularBmap",d),d.$inject=["angularBMap"]}(window,window.angular);